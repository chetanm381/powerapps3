Dish_Menu As screen:
    OnVisible: |
        =
        
        Set(SelectedTab,1);

    Container13 As groupContainer.verticalAutoLayoutContainer:
        Height: =Parent.Height
        LayoutDirection: =LayoutDirection.Vertical
        LayoutMode: =LayoutMode.Auto
        Width: =Parent.Width
        ZIndex: =9

        Container15 As groupContainer.verticalAutoLayoutContainer:
            AlignInContainer: =AlignInContainer.SetByContainer
            FillPortions: =0
            Height: =90
            LayoutDirection: =LayoutDirection.Vertical
            LayoutMinHeight: =112
            LayoutMinWidth: =250
            LayoutMode: =LayoutMode.Auto
            Width: =Parent.Width
            ZIndex: =1

            Dishes_containerHeader_2 As groupContainer.manualLayoutContainer:
                Fill: =RGBA(22, 151, 170, 1)
                FillPortions: =0
                Height: =89
                LayoutMinHeight: =112
                LayoutMinWidth: =250
                Width: =640
                ZIndex: =1

                Label2_2 As label:
                    Align: =Align.Center
                    Color: =RGBA(255, 255, 255, 1)
                    FontWeight: =FontWeight.Bold
                    Height: =89
                    PaddingLeft: =15
                    Size: =20
                    Text: ="Meals Inventory"
                    Width: =560
                    X: =(Parent.Width-Self.Width)/2
                    ZIndex: =1

                Image2_2 As image:
                    Height: =89
                    Image: ='menu (1)'
                    Width: =66
                    X: =33
                    ZIndex: =3

                Arrow1_2 As arrow.backArrow:
                    Fill: =RGBA(255, 255, 255, 1)
                    OnSelect: |-
                        =
                        
                        
                        
                        ForAll(
                           selectedDishes,
                            Patch(
                               DD_fms_quantity,
                                {ID:selectedDishes[@ID]},
                                {
                                  required_Quantity:0
                                }
                            )
                        );
                        
                        
                        
                        
                        Back();
                    X: =Parent.Width-80
                    Y: =19
                    ZIndex: =4

        Container17 As groupContainer.manualLayoutContainer:
            Height: =225
            LayoutMinHeight: =112
            LayoutMinWidth: =250
            Width: =Parent.Width
            ZIndex: =2

            Container10 As groupContainer.manualLayoutContainer:
                Fill: =RGBA(237, 237, 237, 1)
                Height: =Parent.Height
                RadiusBottomLeft: =0
                RadiusBottomRight: =0
                RadiusTopLeft: =0
                RadiusTopRight: =0
                Width: =Parent.Width
                ZIndex: =1

            Gallery3 As gallery.galleryVertical:
                DelayItemLoading: =true
                Height: =Parent.Height-80
                Items: |
                    =
                    LastN(Filter(DD_fms_quantity,flight_id=Text(Flightvalue_popup.ID)),4)
                Layout: =Layout.Vertical
                LoadingSpinner: =LoadingSpinner.Data
                Selectable: =false
                TemplateSize: =219
                Transition: =Transition.Pop
                Width: =Parent.Width
                Y: =78
                ZIndex: =2

                Container2 As groupContainer.manualLayoutContainer:
                    DropShadow: =DropShadow.Semibold
                    Fill: =RGBA(22, 151, 170, 1)
                    Height: =212
                    RadiusBottomLeft: =20
                    RadiusBottomRight: =20
                    RadiusTopLeft: =20
                    RadiusTopRight: =20
                    Width: =Parent.Width-35
                    X: =12
                    Y: =7
                    ZIndex: =10

                    Price As label:
                        Color: =RGBA(255, 255, 255, 1)
                        FontWeight: =FontWeight.Semibold
                        Height: =39
                        OnSelect: =true
                        Text: =LookUp(DD_fms_dishes,ID=Value(ThisItem.dish_id)).Dish_Price
                        Width: =99
                        X: =64
                        Y: =79
                        ZIndex: =1

                    Description As label:
                        Color: =RGBA(255, 255, 255, 1)
                        Height: =92
                        Size: =10
                        Text: =LookUp(DD_fms_dishes,ID=Value(ThisItem.dish_id)).Dish_Description
                        VerticalAlign: =VerticalAlign.Top
                        Width: =278
                        X: =64
                        Y: =110
                        ZIndex: =2

                    Label8_1 As label:
                        Color: =RGBA(255, 255, 255, 1)
                        FontWeight: =FontWeight.Bold
                        Height: =62
                        Size: =20
                        Text: =LookUp(DD_fms_dishes,ID=Value(ThisItem.dish_id)).Dish_Name
                        Tooltip: =
                        Width: =367
                        X: =64
                        Y: =25
                        ZIndex: =3

                    Image1 As image:
                        Height: =50
                        Image: =lunch
                        Width: =50
                        X: =14
                        Y: =37
                        ZIndex: =8

                    Label1 As label:
                        Align: =Align.Center
                        BorderStyle: =BorderStyle.None
                        Color: =RGBA(22, 151, 170, 1)
                        Fill: =RGBA(255, 255, 255, 1)
                        FontWeight: =FontWeight.Semibold
                        Height: =37
                        Size: =10
                        Text: ="Remaining Quantity  "&ThisItem.Quantity
                        Width: =159
                        X: =Parent.Width-190
                        ZIndex: =9

                    Icon4 As icon.Tag:
                        Color: =RGBA(22, 151, 170, 1)
                        Fill: =RGBA(255, 255, 255, 1)
                        FocusedBorderThickness: =0
                        Height: =37
                        Icon: =Icon.Tag
                        Width: =39
                        X: =Parent.Width-215
                        ZIndex: =10

                Label3 As label:
                    Align: =Align.Center
                    Color: =RGBA(255, 255, 255, 1)
                    Height: =43
                    OnSelect: =Select(Parent)
                    PaddingLeft: =0
                    Size: =12
                    Text: ="Items Added"
                    Width: =123
                    X: =Parent.Width-170
                    Y: =55
                    ZIndex: =14

                Label5 As label:
                    Align: =Align.Center
                    Color: =RGBA(255, 255, 255, 1)
                    FontWeight: =FontWeight.Semibold
                    Height: =37
                    OnSelect: =Select(Parent)
                    Size: =20
                    Text: =TextInput3.Text
                    Width: =123
                    X: =Parent.Width-170
                    Y: =90
                    ZIndex: =15

                TextInput3 As text:
                    Default: =If(IsBlank(ThisItem.required_Quantity),0,ThisItem.required_Quantity)
                    Height: =68
                    OnSelect: =Select(Parent)
                    Reset: =true
                    Size: =21
                    Visible: =false
                    Width: =214
                    X: =28
                    Y: =8
                    ZIndex: =17

                Container9 As groupContainer.manualLayoutContainer:
                    Height: =44
                    Width: =123
                    X: =Parent.Width-170
                    Y: =137
                    ZIndex: =19

                    Button2_1 As button:
                        BorderStyle: =BorderStyle.None
                        Color: =RGBA(22, 151, 170, 1)
                        DisplayMode: =If(Value(TextInput3.Text)<1,DisplayMode.Disabled,DisplayMode.Edit)
                        Fill: =RGBA(255, 255, 255, 1)
                        FontWeight: =FontWeight.Bold
                        Height: =44
                        HoverFill: =ColorFade(Self.Fill, -20%)
                        OnSelect: |-
                            =Patch(DD_fms_quantity,{ID:ThisItem.ID},{required_Quantity:Value(If(IsBlank(ThisItem.required_Quantity),0,ThisItem.required_Quantity))-1})
                        PaddingBottom: =14
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Size: =25
                        Text: ="_"
                        VerticalAlign: =VerticalAlign.Bottom
                        Width: =Parent.Width*.50
                        ZIndex: =1

                    Button2 As button:
                        Color: =RGBA(22, 151, 170, 1)
                        DisplayMode: =If(Value(TextInput3.Text)<Value(ThisItem.Quantity),DisplayMode.Edit,DisplayMode.Disabled)
                        Fill: =RGBA(255, 255, 255, 1)
                        FontWeight: =FontWeight.Bold
                        Height: =44
                        HoverFill: =ColorFade(Self.Fill, -20%)
                        OnSelect: |
                            =Patch(DD_fms_quantity,{ID:ThisItem.ID},{required_Quantity:Value(If(IsBlank(ThisItem.required_Quantity),0,ThisItem.required_Quantity))+1})
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Size: =24
                        Text: ="+"
                        Width: =Parent.Width*.50
                        X: =61
                        ZIndex: =2

            Button5 As button:
                BorderColor: =RGBA(0, 0, 0, 0)
                BorderThickness: =0
                Color: =RGBA(22, 151, 170, 1)
                Fill: =RGBA(0, 0, 0, 0)
                Height: =50
                HoverColor: =RGBA(22, 151, 170, 1)
                HoverFill: =
                OnSelect: |
                    =Set(SelectedTab,1)
                PressedColor: =Color.White
                PressedFill: =Self.Fill
                RadiusBottomLeft: =0
                RadiusBottomRight: =0
                RadiusTopLeft: =0
                RadiusTopRight: =0
                Size: =24
                Text: ="All Dishes"
                Width: =169
                X: =32
                Y: =18
                ZIndex: =3

            Rectangle3 As rectangle:
                BorderColor: =RGBA(22, 151, 170, 1)
                Fill: =RGBA(22, 151, 170, 1)
                Height: =2
                Visible: =If(SelectedTab=1,true,false)
                Width: =169
                X: =32
                Y: =68
                ZIndex: =4

            Button5_1 As button:
                BorderThickness: =0
                Color: =RGBA(22, 151, 170, 1)
                Fill: =RGBA(0, 0, 0, 0)
                Height: =50
                HoverColor: =RGBA(22, 151, 170, 1)
                HoverFill: =
                OnSelect: |
                    =Set(SelectedTab,2);
                PressedColor: =Color.White
                PressedFill: =Self.Fill
                RadiusBottomLeft: =0
                RadiusBottomRight: =0
                RadiusTopLeft: =0
                RadiusTopRight: =0
                Size: =24
                Text: ="Cart"
                Visible: =false
                Width: =107
                X: =499
                Y: =19
                ZIndex: =5

            Rectangle3_1 As rectangle:
                BorderColor: =RGBA(22, 151, 170, 1)
                Fill: =RGBA(22, 151, 170, 1)
                Height: =2
                OnSelect: =
                Visible: =If(SelectedTab=2,true,false)
                Width: =107
                X: =499
                Y: =68
                ZIndex: =6

        Container1 As groupContainer.manualLayoutContainer:
            DropShadow: =DropShadow.None
            Fill: =RGBA(255, 255, 255, 1)
            FillPortions: =0
            Height: =99
            LayoutMinHeight: =112
            LayoutMinWidth: =250
            Width: =Parent.Width
            Y: =1037
            ZIndex: =3

            Container3 As groupContainer.manualLayoutContainer:
                Fill: =RGBA(22, 151, 170, 1)
                Height: =61
                RadiusBottomLeft: =15
                RadiusBottomRight: =15
                RadiusTopLeft: =15
                RadiusTopRight: =15
                Width: =391
                X: =32
                Y: =13
                ZIndex: =2

                Rectangle2 As rectangle:
                    Fill: =RGBA(22, 151, 170, 1)
                    Height: =49
                    Width: =391
                    ZIndex: =1

                Label4 As label:
                    Color: =RGBA(255, 255, 255, 1)
                    FontWeight: =FontWeight.Semibold
                    Height: =61
                    Size: =15
                    Text: ="Total Items"
                    Width: =249
                    X: =50
                    ZIndex: =2

                Icon2 As icon.ShoppingCart:
                    Color: =RGBA(255, 255, 255, 1)
                    Height: =30
                    Icon: =Icon.ShoppingCart
                    Width: =50
                    Y: =13
                    ZIndex: =4

                Label6 As label:
                    Align: =Align.Center
                    Color: =RGBA(255, 255, 255, 1)
                    FontWeight: =FontWeight.Bold
                    Height: =61
                    Size: =18
                    Text: =Sum(Gallery3.AllItems,If(IsBlank(required_Quantity),0,required_Quantity))
                    Width: =96
                    X: =295
                    ZIndex: =5

            Container5 As groupContainer.manualLayoutContainer:
                Fill: =RGBA(22, 151, 170, 1)
                Height: =61
                RadiusBottomLeft: =15
                RadiusBottomRight: =15
                RadiusTopLeft: =15
                RadiusTopRight: =15
                Width: =152
                X: =Parent.Width-180
                Y: =13
                ZIndex: =3

                Label7 As label:
                    Align: =Align.Center
                    Color: =RGBA(255, 255, 255, 1)
                    FontWeight: =FontWeight.Semibold
                    Height: =26
                    Size: =15
                    Text: ="CheckOut"
                    Width: =113
                    X: =35
                    Y: =18
                    ZIndex: =1

                Icon5 As icon.Leave:
                    Color: =RGBA(255, 255, 255, 1)
                    Height: =26
                    Icon: =Icon.Leave
                    Width: =53
                    Y: =18
                    ZIndex: =2

                Button4 As button:
                    BorderStyle: =BorderStyle.None
                    BorderThickness: =0
                    Fill: =RGBA(0, 0, 0, 0)
                    Height: =61
                    HoverFill: =RGBA(0,0,0,0.1)
                    OnSelect: |-
                        =ClearCollect(selectedDishes,Gallery3.AllItems);
                        Set(isConnected,Connection.Connected);
                        
                        ForAll(
                           selectedDishes,
                            Patch(
                               DD_fms_quantity,
                                {ID:selectedDishes[@ID]},
                                {
                                  Quantity: Value(selectedDishes[@Quantity]) - Value(selectedDishes[@required_Quantity])
                                }
                            )
                        );
                        
                        If(!isConnected,
                         SaveData(
                                DD_fms_crew_members,
                                "DD_fms_crew_members"
                            );
                            SaveData(
                                DD_fms_quantity,
                                "DD_fms_quantity"
                            );
                            SaveData(
                                DD_fms_dishes,
                                "DD_fms_dishes"
                            );
                            SaveData(
                                DD_fms_flights,
                                "DD_fms_flights"
                            );
                        );
                        Back()
                    PressedFill: =RGBA(0,0,0,0.1)
                    Size: =24
                    Text: =""
                    Width: =108
                    ZIndex: =3

